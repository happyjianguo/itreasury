/* Generated by Together */

package com.iss.itreasury.bill.util;

import java.sql.Connection;
import com.iss.itreasury.dao.ITreasuryDAO;
import com.iss.itreasury.dao.ITreasuryDAOException;
import com.iss.itreasury.dao.ITreasuryDAO;

public class BillDAO extends ITreasuryDAO {
    public BillDAO(String tableName) {
        super(tableName);
    }

    public BillDAO(String tableName, Connection conn) {
        super(tableName, conn);
    }

    /**
     * 数据库逻辑删除操作
     * @param id　　　
     * @param
     * @return
     * @throws ITreasuryDAOException
     */
    public void delete(long id) throws ITreasuryDAOException {
        //To be modify the delete status defined in Constant
        updateStatus(id, 0);
    }

    /**
     * 数据库更新操作操作
     * @return
     * @throws ITreasuryDAOException
     * @param id　　　
     * @param statusID 需要更新到的状态
     */
    public void updateStatus(long id, long statusID) throws ITreasuryDAOException {
        try {
            initDAO();
            StringBuffer buffer = new StringBuffer();
            buffer.append("UPDATE \n");
            buffer.append(strTableName);
            buffer.append(" SET STATUSID = " + statusID);
            //TBD: maybe need add update execute date
            buffer.append("\n  WHERE ID = " + id);
            String strSQL = buffer.toString();
            log.debug(strSQL);
            prepareStatement(strSQL);
            executeQuery();
            finalizeDAO();
        }
        catch (ITreasuryDAOException e) {
            throw new ITreasuryDAOException("状态更新异常", e);
        }
    }
}
